{"version":3,"file":"src_app_pages_profit-release_profit-release_module_ts.905fa8c3ede55b31.js","mappings":"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","sources":["./src/app/pages/profit-release/profit-release.component.ts","./src/app/pages/profit-release/profit-release.component.html","./src/app/pages/profit-release/profit-release.module.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport * as moment from 'moment';\r\nimport { ExportToExcelService } from 'src/app/core/services/common/export-to-excel.service';\r\nimport { PagerService } from 'src/app/core/services/pagination/pager.service';\r\nimport { ReportService } from 'src/app/core/services/report/report.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-profit-release',\r\n  templateUrl: './profit-release.component.html',\r\n  styleUrls: ['./profit-release.component.scss'],\r\n})\r\nexport class ProfitReleaseComponent implements OnInit {\r\n  arrCustomer: any = [];\r\n\r\n  // pagination\r\n  pager: any = {};\r\n  intTotalCount = 0;\r\n  intPageLimit = 50;\r\n  intSkipCount = 0;\r\n  fetchLoading = false;\r\n\r\n  errorIndex: any = '';\r\n  myForm: FormGroup;\r\n  myForm2: FormGroup;\r\n\r\n  constructor(\r\n    private reportService: ReportService,\r\n    private formBuilder: FormBuilder,\r\n    private exportToExcelService: ExportToExcelService,\r\n    private pageServiceObj: PagerService\r\n  ) {\r\n    this.myForm = this.formBuilder.group({\r\n      customer: [null],\r\n      fromDate: [''],\r\n      toDate: [''],\r\n      paymentStatus: ['ALL'],\r\n    });\r\n\r\n    this.myForm2 = this.formBuilder.group({\r\n      paymentDetails: this.formBuilder.array([]),\r\n    });\r\n  }\r\n\r\n  get paymentDetails(): FormArray {\r\n    return this.myForm2.get('paymentDetails') as FormArray;\r\n  }\r\n\r\n  newPaymentDetails(): FormGroup {\r\n    return this.formBuilder.group({\r\n      verifyDate: ['', Validators.required],\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getAllIncomeReport();\r\n  }\r\n\r\n  setPage(page) {\r\n    if (page < 1 || page > this.pager.totalPages) {\r\n      return;\r\n    }\r\n    this.pager = this.pageServiceObj.getPager(\r\n      this.intTotalCount,\r\n      page,\r\n      this.intPageLimit\r\n    );\r\n    this.getAllIncomeReport();\r\n  }\r\n\r\n  getFromCount() {\r\n    return this.intPageLimit * (this.pager.currentPage - 1) + 1;\r\n  }\r\n\r\n  profitRelease(customer, bool, i) {\r\n    console.log('customer', customer);\r\n    console.log('bool', bool);\r\n    console.log('myForm2', this.myForm2.value);\r\n\r\n    if (bool) {\r\n      if (this.paymentDetails.at(i).value.verifyDate === '') {\r\n        this.errorIndex = i;\r\n        return;\r\n      }\r\n      // perform profit release\r\n      Swal.fire({\r\n        title: 'Are you sure?',\r\n        text: `You are going to Release Profit`,\r\n        icon: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#228B22',\r\n        reverseButtons: true,\r\n        confirmButtonText: `Yes, Release it!`,\r\n      }).then((result) => {\r\n        if (result.isConfirmed) {\r\n          const obj = {\r\n            strLoginUserId: localStorage.getItem('userId'),\r\n            fkCustomerId: customer.fkCustomerId,\r\n            profit_Release: bool,\r\n            profit_Date: this.paymentDetails.at(i).value.verifyDate,\r\n          };\r\n\r\n          this.reportService.updateGrossIncomeReport(obj).subscribe((res) => {\r\n            if (res.success) {\r\n              Swal.fire({\r\n                title: 'Success',\r\n                text: 'Successfully Released profit',\r\n                icon: 'success',\r\n              }).then((value) => {\r\n                if (value) {\r\n                  this.errorIndex = '';\r\n                  this.getAllIncomeReport();\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      // revert profit release\r\n\r\n      Swal.fire({\r\n        title: 'Are you sure?',\r\n        text: `You are going to revert Release Profit`,\r\n        icon: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#228B22',\r\n        reverseButtons: true,\r\n        confirmButtonText: `Yes, Revert it!`,\r\n      }).then((result) => {\r\n        if (result.isConfirmed) {\r\n          const obj = {\r\n            strLoginUserId: localStorage.getItem('userId'),\r\n            fkCustomerId: customer.fkCustomerId,\r\n            profit_Release: bool,\r\n            profit_Date: '',\r\n          };\r\n\r\n          this.reportService.updateGrossIncomeReport(obj).subscribe((res) => {\r\n            if (res.success) {\r\n              Swal.fire({\r\n                title: 'Success',\r\n                text: 'Successfully Reverted',\r\n                icon: 'success',\r\n              }).then((value) => {\r\n                if (value) {\r\n                  this.errorIndex = '';\r\n                  this.getAllIncomeReport();\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  getToCount() {\r\n    return (\r\n      this.intPageLimit * (this.pager.currentPage - 1) + this.arrCustomer.length\r\n    );\r\n  }\r\n  getAllIncomeReport() {\r\n    let skipCount = this.intSkipCount;\r\n    if (this.pager.intSkipCount) {\r\n      skipCount = this.pager.intSkipCount;\r\n    }\r\n    const obj = {\r\n      strLoginUserId: localStorage.getItem('userId'),\r\n      intSkipCount: skipCount,\r\n      intPageLimit: this.intPageLimit,\r\n      strStartDate: this.myForm.value.fromDate,\r\n      strEndDate: this.myForm.value.toDate,\r\n      paymentType: this.myForm.value.paymentStatus,\r\n      // fkCustomerId: '',\r\n      // cust_Code: this.myForm.value.customer,\r\n      // fromDate: this.myForm.value.fromDate,\r\n      // endDate: this.myForm.value.toDate,\r\n    };\r\n\r\n    this.fetchLoading = true;\r\n    this.reportService.getGrossIncomeReport(obj).subscribe((res) => {\r\n      this.fetchLoading = false;\r\n      if (res.success) {\r\n        for (let i = 0; i < res.data.length; i++) {\r\n          this.paymentDetails.push(this.newPaymentDetails());\r\n        }\r\n\r\n        console.log('paymentDetails', this.paymentDetails);\r\n        this.arrCustomer = res.data;\r\n\r\n        this.intTotalCount = res.count;\r\n\r\n        this.pager = this.pageServiceObj.getPager(\r\n          this.intTotalCount,\r\n          this.pager.currentPage,\r\n          this.intPageLimit\r\n        );\r\n      } else {\r\n        this.arrCustomer = [];\r\n        // alert(res.message);\r\n      }\r\n    });\r\n  }\r\n\r\n  downloadExcel() {\r\n    const obj = {\r\n      strLoginUserId: localStorage.getItem('userId'),\r\n      intSkipCount: 0,\r\n      intPageLimit: 1000000,\r\n      strStartDate: this.myForm.value.fromDate,\r\n      strEndDate: this.myForm.value.toDate,\r\n      paymentType: this.myForm.value.paymentStatus,\r\n    };\r\n\r\n    this.fetchLoading = true;\r\n    this.reportService.getGrossIncomeReport(obj).subscribe((res) => {\r\n      this.fetchLoading = false;\r\n      if (res.success) {\r\n        let jsonData: any = [];\r\n\r\n        res.data.forEach((e) => {\r\n          let obj: any = {\r\n            Date: moment(e.date, 'YYYY-MM-DD').format('DD-MM-YYYY'),\r\n            'Customer Code': e.customer_code,\r\n            'Customer Name': e.customer_name,\r\n            Package: e.package_name,\r\n            Supplier: e.supplier_name,\r\n            Receivable: e.customerBalence,\r\n            Payable: e.supplierBalence,\r\n            Profit: e.profit,\r\n          };\r\n          jsonData.push(obj);\r\n        });\r\n\r\n        this.exportToExcelService.exportAsExcelFile(\r\n          jsonData,\r\n          'Gross Income Report '\r\n        );\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"card mb-3\">\r\n  <div class=\"card-body\">\r\n    <form [formGroup]=\"myForm\">\r\n      <div class=\"grid grid-cols-1 gap-4 lg:grid-cols-4 md:grid-cols-3\">\r\n        <div>\r\n          <label for=\"fromDate\">\r\n            <span class=\"\"> From Date </span>\r\n          </label>\r\n          <input\r\n            type=\"date\"\r\n            id=\"fromDate\"\r\n            formControlName=\"fromDate\"\r\n            class=\"form-control form-control-solid\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label for=\"toDate\">\r\n            <span class=\"\"> To Date </span>\r\n          </label>\r\n          <input\r\n            type=\"date\"\r\n            id=\"toDate\"\r\n            formControlName=\"toDate\"\r\n            class=\"form-control form-control-solid\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label for=\"status\">\r\n            <span class=\"\"> Payment Status </span>\r\n          </label>\r\n          <div class=\"flex gap-3 py-3\">\r\n            <div\r\n              class=\"form-check form-check-custom form-check-primary form-check-solid\"\r\n            >\r\n              <input\r\n                class=\"form-check-input\"\r\n                type=\"radio\"\r\n                value=\"ALL\"\r\n                formControlName=\"paymentStatus\"\r\n                id=\"ALL\"\r\n              />\r\n              <label class=\"form-check-label\" for=\"ALL\"> All </label>\r\n            </div>\r\n            <div\r\n              class=\"form-check form-check-custom form-check-warning form-check-solid\"\r\n            >\r\n              <input\r\n                class=\"form-check-input\"\r\n                type=\"radio\"\r\n                value=\"ONGOING\"\r\n                formControlName=\"paymentStatus\"\r\n                id=\"ONGOING\"\r\n              />\r\n              <label class=\"form-check-label\" for=\"ONGOING\"> Ongoing </label>\r\n            </div>\r\n            <div\r\n              class=\"form-check form-check-custom form-check-success form-check-solid\"\r\n            >\r\n              <input\r\n                class=\"form-check-input\"\r\n                type=\"radio\"\r\n                value=\"VERIFY\"\r\n                formControlName=\"paymentStatus\"\r\n                id=\"VERIFY\"\r\n              />\r\n              <label class=\"form-check-label\" for=\"VERIFY\"> Completed </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n    <div class=\"text-right\">\r\n      <button class=\"btn btn-primary btn-sm\" (click)=\"getAllIncomeReport()\">\r\n        <i class=\"bi bi-search\"></i>\r\n        Search\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- <div class=\"text-right mb-3\">\r\n  <button class=\"btn btn-secondary btn-sm\" (click)=\"downloadExcel()\">\r\n    <i class=\"bi bi-cloud-download\"></i>\r\n    Download\r\n  </button>\r\n</div> -->\r\n\r\n<!--begin::Row-->\r\n<div class=\"row g-5 g-xl-10\">\r\n  <div class=\"col-md-12 col-lg-12 md-m-5\">\r\n    <div class=\"card\">\r\n      <!-- begin::Body -->\r\n      <div class=\"card-body\">\r\n        <!-- begin::Table container -->\r\n\r\n        <div\r\n          class=\"table-responsive\"\r\n          *ngIf=\"arrCustomer.length > 0; else noDataTemplate\"\r\n        >\r\n          <form [formGroup]=\"myForm2\">\r\n            <!-- begin::Table -->\r\n            <table\r\n              class=\"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4 w-full text-center\"\r\n            >\r\n              <!-- begin::Table head -->\r\n              <thead>\r\n                <tr class=\"fw-bold text-muted\">\r\n                  <th class=\"min-w-130px\">Date</th>\r\n                  <th class=\"min-w-130px\">Customer ID</th>\r\n                  <th class=\"min-w-130px\">Customer Name</th>\r\n                  <th class=\"min-w-130px\">Package</th>\r\n                  <th class=\"min-w-130px\">Supplier</th>\r\n                  <th class=\"min-w-130px\">Receivable</th>\r\n                  <th class=\"min-w-130px\">Payable</th>\r\n                  <th class=\"min-w-130px\">Profit</th>\r\n                  <th class=\"min-w-130px\">Profit Release Date</th>\r\n                  <th class=\"min-w-130px\">Profit Release</th>\r\n                </tr>\r\n              </thead>\r\n              <!-- end::Table head -->\r\n              <!-- begin::Table body -->\r\n              <tbody formArrayName=\"paymentDetails\">\r\n                <tr\r\n                  *ngFor=\"let customer of arrCustomer; let i = index\"\r\n                  [formGroupName]=\"i\"\r\n                >\r\n                  <td>\r\n                    {{ customer.date | date : \"mediumDate\" }}\r\n                  </td>\r\n                  <td>\r\n                    {{ customer.customer_code }}\r\n                  </td>\r\n                  <td>\r\n                    {{ customer.customer_name }}\r\n                  </td>\r\n                  <td>\r\n                    {{ customer.package_name }}\r\n                  </td>\r\n                  <td>{{ customer.supplier_name }}</td>\r\n                  <td>{{ customer.customerBalence }}</td>\r\n                  <td>{{ customer.supplierBalence }}</td>\r\n                  <td>\r\n                    {{ customer.profit }}\r\n                  </td>\r\n                  <td>\r\n                    <!-- {{ customer.profit_Release ? customer.profit_Date : \"\" }} -->\r\n\r\n                    <ng-container\r\n                      *ngIf=\"customer.profit_Release; else elsePRel\"\r\n                    >\r\n                      {{ customer.profit_Date | date : \"mediumDate\" }}\r\n                    </ng-container>\r\n                    <ng-template #elsePRel>\r\n                      <input\r\n                        type=\"date\"\r\n                        class=\"form-control form-control-solid\"\r\n                        formControlName=\"verifyDate\"\r\n                      />\r\n\r\n                      <div\r\n                        *ngIf=\"\r\n                          paymentDetails.get(i + '.verifyDate')?.errors &&\r\n                          errorIndex === i\r\n                        \"\r\n                        class=\"text-red-500\"\r\n                      >\r\n                        <small> Verify Date Required </small>\r\n                      </div>\r\n                    </ng-template>\r\n                  </td>\r\n                  <td>\r\n                    <ng-container\r\n                      *ngIf=\"customer.profit_Release; else elseReleases\"\r\n                    >\r\n                      <a\r\n                        class=\"btn btn-warning btn-sm\"\r\n                        (click)=\"profitRelease(customer, false, i)\"\r\n                      >\r\n                        Revert\r\n                      </a>\r\n                    </ng-container>\r\n                    <ng-template #elseReleases>\r\n                      <button\r\n                        class=\"btn btn-success btn-sm\"\r\n                        [disabled]=\"\r\n                          customer.customerBalence !== 0 &&\r\n                          customer.supplierBalence !== 0\r\n                        \"\r\n                        (click)=\"profitRelease(customer, true, i)\"\r\n                      >\r\n                        Profit Release\r\n                      </button>\r\n                    </ng-template>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n              <!-- end::Table body -->\r\n            </table>\r\n            <!-- end::Table -->\r\n          </form>\r\n        </div>\r\n        <!-- end::Table container -->\r\n\r\n        <!-- begin::Empty -->\r\n        <ng-template #noDataTemplate>\r\n          <ng-container *ngIf=\"fetchLoading; else elseTemplate\">\r\n            <div class=\"d-flex flex-column align-items-center\">\r\n              <!-- begin::Illustration -->\r\n              <div class=\"text-center px-4\">\r\n                <img\r\n                  src=\"./assets/media/illustrations/dozzy-1/5.png\"\r\n                  class=\"mw-100 mh-300px animate-pulse\"\r\n                  alt=\"\"\r\n                />\r\n              </div>\r\n              <!-- end::Illustration -->\r\n\r\n              <!-- begin::Message -->\r\n              <div class=\"fw-bold text-xl text-gray-600 text-center pt-15\">\r\n                <span\r\n                  class=\"spinner-border spinner-border-sm align-middle ms-2\"\r\n                ></span>\r\n                Loading Data...\r\n              </div>\r\n              <!-- end::Message -->\r\n            </div>\r\n          </ng-container>\r\n          <ng-template #elseTemplate>\r\n            <div class=\"d-flex flex-column align-items-center\">\r\n              <!-- begin::Illustration -->\r\n              <div class=\"text-center px-4\">\r\n                <img\r\n                  src=\"./assets/media/illustrations/sketchy-1/5.png\"\r\n                  class=\"mw-100 mh-300px\"\r\n                  alt=\"\"\r\n                />\r\n              </div>\r\n              <!-- end::Illustration -->\r\n\r\n              <!-- begin::Message -->\r\n              <div class=\"fw-bold fs-6 text-gray-600 text-center pt-15\">\r\n                No Data Found\r\n              </div>\r\n              <!-- end::Message -->\r\n            </div>\r\n          </ng-template>\r\n        </ng-template>\r\n        <!-- end::Empty -->\r\n        <!-- begin::Body -->\r\n      </div>\r\n      <!-- end::Card -->\r\n\r\n      <div\r\n        class=\"flex justify-center md:justify-between flex-col md:flex-row p-5\"\r\n        *ngIf=\"arrCustomer.length > 0\"\r\n      >\r\n        <div class=\"fs-6 fw-bold text-gray-700 mb-3 md:mb-0 text-center\">\r\n          Showing {{ getFromCount() }} to {{ getToCount() }} of\r\n          {{ intTotalCount }}\r\n          entries\r\n        </div>\r\n\r\n        <ul class=\"pagination\" *ngIf=\"pager.pages && pager.pages.length\">\r\n          <li\r\n            class=\"page-item previous\"\r\n            [ngClass]=\"{ disabled: pager.currentPage === 1 }\"\r\n          >\r\n            <a\r\n              class=\"page-link cursor-pointer\"\r\n              (click)=\"setPage(pager.currentPage - 1)\"\r\n            >\r\n              <i class=\"previous\"></i>\r\n            </a>\r\n          </li>\r\n\r\n          <li\r\n            class=\"page-item\"\r\n            *ngFor=\"let page of pager.pages\"\r\n            [ngClass]=\"{ active: pager.currentPage === page }\"\r\n          >\r\n            <a class=\"page-link cursor-pointer\" (click)=\"setPage(page)\">\r\n              {{ page }}\r\n            </a>\r\n          </li>\r\n\r\n          <li\r\n            class=\"page-item next\"\r\n            [ngClass]=\"{\r\n              disabled: pager.currentPage === pager.totalPages\r\n            }\"\r\n          >\r\n            <a\r\n              class=\"page-link cursor-pointer\"\r\n              (click)=\"setPage(pager.currentPage + 1)\"\r\n            >\r\n              <i class=\"next\"></i>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <!--end::Col-->\r\n  </div>\r\n</div>\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { RouterModule } from '@angular/router';\r\nimport { NgbTooltipModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { NgSelectModule } from '@ng-select/ng-select';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { InlineSVGModule } from 'ng-inline-svg-2';\r\nimport { WidgetsModule } from 'src/app/theme/partials';\r\nimport { ProfitReleaseComponent } from './profit-release.component';\r\n\r\n@NgModule({\r\n  declarations: [ProfitReleaseComponent],\r\n  imports: [\r\n    CommonModule,\r\n    NgbTooltipModule,\r\n    FormsModule,\r\n    NgSelectModule,\r\n    InlineSVGModule,\r\n    ReactiveFormsModule,\r\n    TranslateModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: ProfitReleaseComponent,\r\n      },\r\n    ]),\r\n    WidgetsModule,\r\n  ],\r\n})\r\nexport class ProfitReleaseModule {}\r\n"],"names":[],"sourceRoot":"webpack:///"}